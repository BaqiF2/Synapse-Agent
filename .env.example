# ============================================================
# Synapse Agent 环境变量配置
# LLM 凭证已迁移至 ~/.synapse/settings.json，此文件仅控制运行时行为
# ============================================================

# -------------------- LLM --------------------
# 单次请求最大 token 数（通用，所有 Provider 共享）
# SYNAPSE_MAX_TOKENS=4096
# Anthropic Provider 专用 max_tokens（优先级高于 SYNAPSE_MAX_TOKENS）
# SYNAPSE_ANTHROPIC_MAX_TOKENS=4096
# OpenAI Provider 专用 max_tokens
# SYNAPSE_OPENAI_MAX_TOKENS=4096

# -------------------- Agent Loop --------------------
# 主 Agent / SubAgent 最大工具迭代次数
# SYNAPSE_MAX_TOOL_ITERATIONS=50
# 连续工具失败上限（达到后停止当前循环）
# SYNAPSE_MAX_CONSECUTIVE_TOOL_FAILURES=3
# 单步最大并行子任务数
# SYNAPSE_MAX_PARALLEL_TASKS=5
# 滑动窗口大小（用于检测连续失败模式）
# SYNAPSE_FAILURE_WINDOW_SIZE=10
# 滑动窗口内失败阈值
# SYNAPSE_FAILURE_THRESHOLD=3

# -------------------- Context Management --------------------
# 上下文窗口最大 token 数（估算）
# SYNAPSE_MAX_CONTEXT_WINDOW=200000
# 触发 offload 的 token 阈值
# SYNAPSE_OFFLOAD_THRESHOLD=150000
# offload 最小字符数
# SYNAPSE_OFFLOAD_MIN_CHARS=50
# offload 扫描比率 (0-1)
# SYNAPSE_OFFLOAD_SCAN_RATIO=0.5
# 触发自动 compact 的 token 阈值
# SYNAPSE_COMPACT_TRIGGER_THRESHOLD=180000
# compact 目标 token 数
# SYNAPSE_COMPACT_TARGET_TOKENS=8000
# compact 保留最近消息条数
# SYNAPSE_COMPACT_PRESERVE_COUNT=4
# compact 重试次数
# SYNAPSE_COMPACT_RETRY_COUNT=3
# compact 使用的模型（留空则使用当前模型）
# SYNAPSE_COMPACT_MODEL=
# compact 冷却步数（两次 compact 之间最少间隔步数）
# SYNAPSE_COMPACT_COOLDOWN_STEPS=5

# -------------------- Session --------------------
# 会话保存目录
# SYNAPSE_SESSIONS_DIR=~/.synapse/sessions
# 最大保存会话数
# SYNAPSE_MAX_SESSIONS=100
# 用量统计保留轮次数
# SYNAPSE_MAX_ROUNDS_KEPT=50

# -------------------- Skill Enhance --------------------
# 触发增强所需的最少工具调用次数
# SYNAPSE_MIN_ENHANCE_TOOL_CALLS=10
# 触发增强所需的最少唯一工具数
# SYNAPSE_MIN_ENHANCE_UNIQUE_TOOLS=5
# 增强分析最大字符数
# SYNAPSE_MAX_ENHANCE_CONTEXT_CHARS=50000
# 技能增强子智能体超时（毫秒）
# SYNAPSE_SKILL_SUBAGENT_TIMEOUT=120000

# -------------------- Skill Cache / Watcher --------------------
# 技能元数据缓存有效期（毫秒）
# SYNAPSE_SKILL_CACHE_TTL_MS=300000
# 技能文件变动去抖时间（毫秒）
# SYNAPSE_SKILL_WATCHER_DEBOUNCE_MS=1500
# 技能最大版本保留数
# SYNAPSE_SKILL_MAX_VERSIONS=10
# 技能导入超时（毫秒）
# SYNAPSE_SKILL_IMPORT_TIMEOUT=30000
# 技能生成最大修复轮次
# SYNAPSE_SKILL_MAX_FIX_ROUNDS=3

# -------------------- Logging --------------------
# 日志级别：TRACE / DEBUG / INFO / WARN / ERROR / NONE
# SYNAPSE_LOG_LEVEL=INFO
# 日志文件目录
# SYNAPSE_LOG_DIR=~/.synapse/logs
# 日志文件名
# SYNAPSE_LOG_FILE=agent.log
# 是否写入文件（true / false）
# SYNAPSE_LOG_TO_FILE=true
# 单个日志文件最大字节数（默认 10MB）
# SYNAPSE_LOG_MAX_SIZE=10485760

# -------------------- Bash Tool --------------------
# Bash 命令超时（毫秒）
# SYNAPSE_COMMAND_TIMEOUT=30000
# Bash 会话重启延迟（毫秒）
# SYNAPSE_BASH_RESTART_DELAY=200

# -------------------- Agent Shell Tools --------------------
# read 命令默认读取行数（0 = 不限）
# SYNAPSE_READ_DEFAULT_LIMIT=2000
# search / glob 默认最大结果数
# SYNAPSE_MAX_SEARCH_RESULTS=100

# -------------------- Terminal Rendering --------------------
# 工具输出最大显示行数
# SYNAPSE_MAX_OUTPUT_LINES=5
# 终端最小高度（低于此值隐藏底部栏）
# SYNAPSE_MIN_TERMINAL_HEIGHT=12
# 子智能体最近工具调用显示数
# SYNAPSE_MAX_RECENT_TOOLS=5
# 工具结果摘要字符上限
# SYNAPSE_TOOL_RESULT_SUMMARY_LIMIT=500
# 动画刷新间隔（毫秒）
# SYNAPSE_ANIMATION_INTERVAL=350

# -------------------- MCP --------------------
# MCP 服务器连接超时（毫秒）
# SYNAPSE_MCP_CONNECT_TIMEOUT=30000
# MCP 初始化超时（毫秒）
# SYNAPSE_MCP_INIT_TIMEOUT_MS=30000
# MCP 请求超时（毫秒）
# SYNAPSE_MCP_TIMEOUT_MS=30000

# -------------------- Todo --------------------
# Todo 列表最大条目数
# SYNAPSE_TODO_MAX_ITEMS=20
# Todo 内容最大长度
# SYNAPSE_TODO_MAX_CONTENT_LENGTH=500
# Todo 过期提醒步数阈值
# SYNAPSE_TODO_STALE_THRESHOLD=10

# -------------------- Misc --------------------
# token 估算：每个 token 约多少字符
# SYNAPSE_CHARS_PER_TOKEN=4
# Synapse 主目录
# SYNAPSE_HOME=~/.synapse
# Meta-skill 目录
# SYNAPSE_META_SKILLS_DIR=~/.synapse/skills
