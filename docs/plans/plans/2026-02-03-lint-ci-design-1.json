[
  {
    "category": "infrastructure",
    "prd": "2026-02-03-lint-ci-design.md#Lint-规则与输入输出",
    "description": "新增 ESLint 扁平配置，启用 @typescript-eslint/recommended 并配置工程化规则",
    "bdd": [
      {
        "title": "ESLint 配置包含指定规则与忽略目录",
        "description": "验证 eslint.config.js 采用扁平配置并包含指定规则与默认忽略",
        "steps": [
          "打开 eslint.config.js",
          "确认使用 @typescript-eslint 解析器与插件",
          "确认启用 eslint:recommended 与 @typescript-eslint/recommended",
          "确认包含 consistent-type-imports、no-unused-vars（允许 _ 前缀）、no-restricted-globals 规则",
          "确认忽略 dist/、node_modules/、coverage/"
        ],
        "expected": "eslint.config.js 包含上述规则与忽略项；no-restricted-globals 使用默认列表 (Default assumption: event, fdescribe, fit, length, name, parent, status, top)"
      }
    ],
    "passes": true
  },
  {
    "category": "infrastructure",
    "prd": "2026-02-03-lint-ci-design.md#架构与组件",
    "description": "在 package.json 中新增 lint 与 lint:fix 脚本并让警告视为失败",
    "bdd": [
      {
        "title": "Lint 脚本按目录执行并将警告视为失败",
        "description": "验证 package.json 脚本包含 lint 与 lint:fix",
        "steps": [
          "打开 package.json",
          "检查 scripts.lint",
          "检查 scripts['lint:fix']"
        ],
        "expected": "lint 脚本对 src/ tests/ examples/ 运行 eslint 并包含 --max-warnings 0；lint:fix 在同范围基础上启用 --fix"
      }
    ],
    "passes": true
  },
  {
    "category": "infrastructure",
    "prd": "2026-02-03-lint-ci-design.md#架构与组件",
    "description": "锁定 Bun 版本以保证 CI 与本地一致",
    "bdd": [
      {
        "title": "Bun 版本文件存在并固定到 1.3.5",
        "description": "验证 .bun-version 文件存在且内容正确",
        "steps": [
          "确认 .bun-version 文件存在",
          "读取 .bun-version 内容"
        ],
        "expected": ".bun-version 内容为 1.3.5"
      }
    ],
    "passes": true
  },
  {
    "category": "infrastructure",
    "prd": "2026-02-03-lint-ci-design.md#CI-流程与错误处理",
    "description": "新增 GitHub Actions CI，触发于 push 与 pull_request 并运行 lint/typecheck/test",
    "bdd": [
      {
        "title": "CI 工作流包含触发与运行步骤",
        "description": "验证 .github/workflows/ci.yml 的触发与步骤",
        "steps": [
          "确认 .github/workflows/ci.yml 存在",
          "检查 on.push 与 on.pull_request 触发",
          "检查使用 oven-sh/setup-bun 并读取 .bun-version",
          "检查执行 bun install --frozen-lockfile、bun run lint、bun run typecheck、bun run test"
        ],
        "expected": "工作流满足触发与步骤要求，按顺序运行 lint/typecheck/test"
      }
    ],
    "passes": true
  }
]
