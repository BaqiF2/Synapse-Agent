# ADR-006: MCP 集成 SDK — @modelcontextprotocol/sdk

## Status

Accepted

## Context

PRD F-005 要求保持三层工具系统，其中 Extension Shell Command 层依赖 MCP SDK 与外部工具集成。

**PRD Reference**: F-005, F-008

**Business Driver**: Extension Shell 层的 MCP 工具集成需求

## Decision Drivers

- 项目已使用 @modelcontextprotocol/sdk
- MCP 是 AI Agent 工具集成的事实标准
- 三层工具系统中 Extension Shell 层核心依赖

## Considered Options

### Option A: @modelcontextprotocol/sdk (Current)

| Dimension | Assessment |
|-----------|-----------|
| Performance | 标准协议，性能取决于 MCP Server 实现 |
| Community & Ecosystem | 生态快速增长，大量 MCP Server 可用 |
| Risk | 协议仍在快速演进，可能有 breaking changes |

## Decision

**Chosen**: Option A — @modelcontextprotocol/sdk

本决策为 **Constrained**，由 Extension Shell 层架构约束。

## Rationale

1. MCP 是 Extension Shell 层的唯一合理选择
2. 项目已集成，切换无意义
3. 生态活跃，工具丰富

## Consequences

### Positive
- 与 AI Agent 工具生态接轨
- 丰富的第三方 MCP Server 可直接使用

### Negative
- MCP 协议可能有 breaking changes（可通过固定版本缓解）

## Validation

- [x] Team sign-off obtained
